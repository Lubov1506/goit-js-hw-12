{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/icon-error.svg","../src/img/icon-warn.svg","../src/js/iziToast.js","../src/js/checkFunctions.js","../src/js/smothScroll.js","../src/js/onFormSubmit.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '43318381-7e1885a90dd63db156a286238';\naxios.defaults.baseURL = 'https://pixabay.com';\n\nconst getAxiosData = async (query, photosPage) => {\n  try {\n    const searchParams = {\n      params: {\n        key: KEY,\n        q: query,\n        image_type: 'photo',\n        safesearch: true,\n        page: photosPage,\n        per_page: 15,\n      },\n    };\n    const { data } = await axios.get(`/api/`, searchParams);\n    return data;\n  } catch (err) {\n    throw new Error(err);\n  }\n};\n\nexport { getAxiosData };\n","const renderAllCards = data => {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n          <ul class=\"item-info\">\n            <li class=\"item-likes\">\n              <p class=\"title likes-title\">Likes</p>\n              <p class=\"value likes-value\">${likes}</p>\n            </li>\n            <li class=\"item-views\">\n              <p class=\"title views-title\">Views</p>\n              <p class=\"value views-value\">${views}</p>\n            </li>\n            <li class=\"item-comments\">\n              <p class=\"title comments-title\">Comments</p>\n              <p class=\"value comments-value\">${comments}</p>\n            </li>\n            <li class=\"item-downloads\">\n              <p class=\"title downloads-title\">Downloads</p>\n              <p class=\"value downloads-value\">${downloads}</p>\n            </li>\n            </ul>`;\n      }\n    )\n    .join('');\n};\nexport { renderAllCards };\n","export default \"__VITE_ASSET__eb775c6f__\"","export default \"__VITE_ASSET__16c1a6bd__\"","import iziToast from 'izitoast';\nimport iconError from '../img/icon-error.svg';\nimport iconWarning from '../img/icon-warn.svg';\n\nconst optionsWarming = {\n  title: 'Caution',\n  message: 'Type what you want to find!',\n  backgroundColor: '#FFA000',\n  position: 'topRight',\n  theme: 'dark',\n  iconUrl: iconWarning,\n  timeout: 2000,\n};\nconst optionsError = {\n  theme: 'dark',\n  position: 'topRight',\n  message:\n    'Sorry, there are no images matching your search query. Please, try again!',\n  backgroundColor: ' #ef4040',\n  iconUrl: iconError,\n  maxWidth: '432px',\n  timeout: 2000,\n};\nconst warmMsg = () => {\n  iziToast.warning(optionsWarming);\n};\nconst errorMsg = () => {\n  iziToast.error(optionsError);\n};\n\nexport { warmMsg, errorMsg };\n","import { errorMsg, warmMsg } from './iziToast';\nconst galleryList = document.querySelector('.gallery');\nconst form = document.querySelector('form');\n\nconst checkEmptyData = data => {\n  if (data.length === 0) {\n    errorMsg();\n    galleryList.innerHTML = '';\n    return true;\n  }\n};\nconst checkEmptyInput = userQuery => {\n  if (userQuery.trim() === '') {\n    warmMsg();\n    galleryList.innerHTML = '';\n    form.elements.user_query.value = '';\n    form.elements.user_query.focus();\n    return true;\n  }\n};\nexport { checkEmptyData, checkEmptyInput };\n","export const smoothScrollByCardHeight = galleryItem => {\n  const itemHeight = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: itemHeight * 2,\n    behavior: 'smooth',\n  });\n};\n","import { getAxiosData } from './pixabay-api';\nimport { renderAllCards } from './render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport { checkEmptyData, checkEmptyInput } from './checkFunctions';\nimport { smoothScrollByCardHeight } from './smothScroll';\n\nconst galleryList = document.querySelector('.gallery');\nconst form = document.querySelector('form');\nconst loadMoreBtn = document.querySelector('.load-btn');\nlet userQuery = null;\nlet photosPage = 1;\n\nlet gallery = new SimpleLightbox('.gallery a');\n\nconst removeLoadMoreBtn = () => loadMoreBtn.classList.add('is-hidden');\n\nconst onFormSubmit = async e => {\n  e.preventDefault();\n  userQuery = form.elements.user_query.value;\n  photosPage = 1;\n  if (checkEmptyInput(userQuery)) {\n    removeLoadMoreBtn();\n    return;\n  }\n\n  galleryList.innerHTML = '';\n  const loader = document.querySelector('.loader');\n  loader.classList.add('is-visible');\n\n  try {\n    const { hits, total, totalHits } = await getAxiosData(\n      userQuery,\n      photosPage\n    );\n    loader.classList.remove('is-visible');\n    if (checkEmptyData(hits)) {\n      removeLoadMoreBtn();\n      return;\n    }\n\n    const cards = renderAllCards(hits);\n\n    galleryList.innerHTML = '';\n    galleryList.insertAdjacentHTML('beforeend', cards);\n\n    if (total > totalHits) {\n      loadMoreBtn.classList.remove('is-hidden');\n      loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    } else {\n      removeLoadMoreBtn();\n    }\n\n    gallery.refresh();\n  } catch (err) {\n    loader.classList.remove('is-visible');\n    throw new Error(err);\n  }\n\n  form.reset();\n};\n\nconst onLoadMoreBtnClick = async () => {\n  photosPage++;\n  try {\n    const { hits, totalHits } = await getAxiosData(userQuery, photosPage);\n\n    const cards = renderAllCards(hits);\n    galleryList.insertAdjacentHTML('beforeend', cards);\n\n    if (totalHits === photosPage) {\n      loadMoreBtn.classList.add('is-hidden');\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n    }\n\n    const galleryItem = galleryList.querySelector('.gallery-item');\n    window.addEventListener('load', smoothScrollByCardHeight(galleryItem));\n  } catch (err) {\n    throw new Error(err);\n  }\n};\n\nexport { onFormSubmit };\n","import { onFormSubmit } from './js/onFormSubmit';\n\nconst form = document.querySelector('form');\n\nform.addEventListener('submit', onFormSubmit);\n"],"names":["KEY","axios","getAxiosData","query","photosPage","searchParams","data","err","renderAllCards","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iconError","iconWarning","optionsWarming","optionsError","warmMsg","iziToast","errorMsg","galleryList","form","checkEmptyData","checkEmptyInput","userQuery","smoothScrollByCardHeight","galleryItem","itemHeight","loadMoreBtn","gallery","SimpleLightbox","removeLoadMoreBtn","onFormSubmit","e","loader","hits","total","totalHits","cards","onLoadMoreBtnClick"],"mappings":"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"}